<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reportería - Remesas</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

  <style>
    /* Estilos puntuales del reporte */
    .rep-wrap { max-width: 1200px; margin: 0 auto; display: grid; gap: 14px; }
    .rep-filtros {
      display:flex; flex-wrap:wrap; gap:12px; align-items:end;
      background:#fff; border:1px solid #e5e7eb; border-radius:10px; padding:12px;
    }
    .rep-actions { margin-left:auto; display:flex; gap:8px; }
    .btn-ghost{ background:#fff; border:1px solid #d1d5db; padding:8px 12px; border-radius:8px; cursor:pointer; }
    .btn-ghost:hover{ background:#f5f7fa; }
    .rep-card { background:#fff; border:1px solid #e5e7eb; border-radius:10px; box-shadow:0 8px 20px rgba(0,0,0,.06); overflow:hidden; }

    table.rep { width:100%; border-collapse: collapse; }
    table.rep thead th {
      background:#f3f4f6; border-bottom:1px solid #e5e7eb; padding:8px; text-align:center; font-weight:700;
    }
    table.rep tbody td {
      border-bottom:1px solid #eef1f5; padding:8px; font-variant-numeric: tabular-nums;
    }
    table.rep tfoot td { font-weight:700; border-top:1px solid #dfe3e8; padding:8px; }
    .td-right{ text-align:right; }
    .ap-col{ background:#e7e7e7; font-weight:700; }
    .tot-row td{ background:#fafafa; }

    /* Nav reportería (submenu simple) */
    .nav-group > a { display:flex; align-items:center; justify-content:space-between; }
    .nav-group .nav-sub { display:none; padding-left: 10px; }
    .nav-group.is-open .nav-sub { display:block; }
    .nav-sub a { padding-left: 26px; }
    .nav-item.is-current { background: #e8f0fe; }
  </style>
</head>
<body>
  <div id="app" class="ui-scale layout">
    <!-- Sidebar -->
    <aside class="sidebar" role="navigation" aria-label="Barra lateral">
      <div class="sidebar__brand">
        <div class="brand-mark" aria-hidden="true">NG</div>
        <div class="brand-meta"><strong>Sistema</strong><span>Gestión de Flujo de Cajas</span></div>
      </div>

      <nav class="sidebar__nav">
        <a class="nav-item" href="{{ url_for('resumen_local') }}"><span class="nav-dot"></span> Resumen Local</a>

        <!-- Grupo: Reportería (desplegable) -->
<div class="nav-group {% if request.path.startswith('/reporteria') %}is-open{% endif %}">
  <!-- Toggle con el MISMO look de .nav-item -->
  <a href="javascript:void(0)"
     id="navReportes"
     class="nav-item nav-toggle {% if request.path.startswith('/reporteria') %}is-active{% endif %}"
     aria-expanded="{% if request.path.startswith('/reporteria') %}true{% else %}false{% endif %}">
    <span class="nav-dot" aria-hidden="true"></span>
    <span>Reportería</span>
    <!-- caret -->
    <svg class="nav-caret" width="14" height="14" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
         aria-hidden="true" focusable="false" style="margin-left:auto;">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  </a>

  <!-- Subitems con leve sangría -->
  <div class="nav-sub">
    <a class="nav-item nav-sub-item {% if request.path == url_for('ui_reporteria_remesas') %}is-active{% endif %}"
       href="{{ url_for('ui_reporteria_remesas') }}">
      <span class="nav-dot" aria-hidden="true"></span>
      Remesas
    </a>

    <a class="nav-item nav-sub-item {% if request.path == url_for('index') %}is-active{% endif %}"
       href="{{ url_for('index') if false else '#' }}">
      <span class="nav-dot" aria-hidden="true"></span>
      Cuentas Corrientes
    </a>
  </div>
</div>


        <a class="nav-item" href="{{ url_for('index') }}"><span class="nav-dot"></span> Carga de Datos</a>
      </nav>

      <div class="sidebar__footer"><a class="nav-ghost" href="{{ url_for('logout') }}">Cerrar Sesión</a></div>
      <button class="sidebar__toggle" id="toggleSidebar" aria-label="Abrir/cerrar menú">☰</button>
    </aside>

    <!-- Main -->
    <main class="main">
      <div class="container">
        <div class="header">
          <div class="header-info">
            <div class="info-item"><span class="label">Fecha:</span> <span id="currentDate" class="value"></span></div>
            <div class="info-item"><span class="label">Usuario:</span> <span class="value">{{ session['username'] }}</span></div>
            <div class="info-item"><span class="label">Local:</span> <span class="value">{{ session['local'] }}</span></div>
            <div class="info-item"><span class="label">Sociedad:</span> <span class="value">{{ session['society'] }}</span></div>
          </div>
          <div class="header-buttons">
            <a href="{{ url_for('index') }}" class="btn-header">Inicio</a>
            <a href="{{ url_for('logout') }}" class="btn-header">Cerrar Sesión</a>
          </div>
        </div>

        <div class="rep-wrap">
          <div class="rep-filtros">
            <div class="form-group">
              <label for="rep-fecha">Seleccioná una fecha:</label>
              <input type="date" id="rep-fecha" class="form-control" required>
            </div>
            <div class="rep-actions">
              <button class="btn-submit" id="rep-buscar">Actualizar</button>
              <button class="btn-ghost" id="rep-excel">Exportar a Excel</button>
            </div>
          </div>

          <section class="rep-card">
            <div style="padding:10px 12px; border-bottom:1px solid #e5e7eb; display:flex; justify-content:space-between; align-items:center;">
              <h2 style="margin:0; font-size:18px;">Reporte de Remesas</h2>
              <div id="rep-badge" style="font-weight:600; color:#6b7280;"></div>
            </div>

            <div style="padding: 8px 12px 14px;">
              <div style="overflow:auto">
                <table class="rep" id="rep-table">
                  <thead id="rep-thead"></thead>
                  <tbody id="rep-tbody"></tbody>
                  <tfoot id="rep-tfoot"></tfoot>
                </table>
              </div>
            </div>
          </section>
        </div>
      </div>
    </main>
  </div>

  <script src="{{ url_for('static', filename='js/reporte_remesas.js') }}"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/reporte_remesas.css') }}">

<script>
document.addEventListener('DOMContentLoaded', () => {
  const grp = document.querySelector('.nav-group');
  const tgl = document.getElementById('navReportes');
  if (grp && tgl) {
    tgl.addEventListener('click', (e) => {
      e.preventDefault();
      const open = grp.classList.toggle('is-open');
      tgl.setAttribute('aria-expanded', open ? 'true' : 'false');
    });
  }
});
</script>


</body>
</html>
